---
ID: 3314
post_title: >
  Comment se construit un graphique avec
  ggplot2 ?
author: colin
post_excerpt: ""
layout: post
permalink: >
  https://abcdr.thinkr.fr/comment-se-construit-un-graphique-avec-ggplot2/
published: true
post_date: 2017-05-04 20:01:41
---
<p>Package de dataviz du tidyverse, ggplot2 est l’<strong>incontournable R pour la visualisation de données</strong>. La force de ce module ? ggplot2 repose sur une « grammaire graphique ». Pour plus d’infos sur cette philosophie, rendez-vous sur les liens en bas de page.</p><p>Construisons pas à pas un ggplot.</p><p><strong>1. Installation</strong></p><p> <pre><code>install.packages("ggplot2")<br />#Ou pour la version en développement :<br />devtools::install_github("tidyverse/ggplot2")</code></pre> </p><p><strong>2. Ouverture</strong></p><p> <pre><code>library("ggplot2")</code></pre> </p><p><strong>3. Couche 1 : "data &amp; aesthetics"</strong></p><p>Avec cette première ligne, il s'agit tout simplement d'indiquer l'objet contenant le jeu de données, et les variables qui vont être visualisées en x, en y, ou avec les couleurs, les tailles...</p><p> <pre><code>ggplot(data = iris, aes(Sepal.Length, Sepal.Width, color = Species ))</code></pre> </p><p><strong>4. Couche 2 : "geom"</strong></p><p>Ensuite, vous choisissez l'élément géométrique avec lequel vous souhaitez visualiser vos données (point, bar, histogram...).</p><p> <pre><code>ggplot(data = iris, aes(Sepal.Length, Sepal.Width, color = Species )) + <br /> geom_point()</code></pre> </p><p><strong>5. Couche 3 : "scale"</strong></p><p>Cette couche contrôle la projection de vos données, par exemple au niveau des couleurs.</p><p> <pre><code>ggplot(data = iris, aes(Sepal.Length, Sepal.Width, color = Species)) + <br /> geom_point() +<br /> scale_color_manual(values = c("#45B8D2", "#E66A41", "#88878C"))</code></pre> </p><p><strong>6. Couche 4 : "coord"</strong></p><p>Ici, vous pouvez gérer le système de coordonnées de votre graphique. Le plus courant ? Le système cartésien, utilisé nativement dans ggplot2. </p><p> <pre><code>ggplot(data = iris, aes(Sepal.Length, Sepal.Width, color = Species)) + <br /> geom_point() +<br /> scale_color_manual(values = c("#45B8D2", "#E66A41", "#88878C")) + <br /> coord_cartesian()</code></pre> </p><p>Vous pouvez également choisir un système de carte, avec coord_map(). <br /><br /><strong>7. Couche 5 : "facet"</strong></p><p>Pour plus de lisibilité, vous pouvez séparer votre graphique en plusieurs sous graphiques, chacun correspondant à un facteur de votre jeu de données.</p><p> <pre><code>ggplot(data = iris, aes(Sepal.Length, Sepal.Width, color = Species)) + <br /> geom_point() +<br /> scale_color_manual(values = c("#45B8D2", "#E66A41", "#88878C")) + <br /> coord_cartesian() + <br /> facet_wrap(~Species)</code></pre> </p><p><strong>8. Couche 6 : "theme"</strong><br /> <br />Deux solutions quant aux thèmes : utiliser un thème natif, ou créer le vôtre ! Le guide de la création est disponible sur le site de ggplot2(http://ggplot2.tidyverse.org/reference/theme.html).</p><p> <pre><code>ggplot(data = iris, aes(Sepal.Length, Sepal.Width, color = Species)) + <br /> geom_point() +<br /> scale_color_manual(values = c("#45B8D2", "#E66A41", "#88878C")) + <br /> coord_cartesian() + <br /> facet_wrap(~Species) + <br /> theme_bw()</code></pre> </p><p><strong>En savoir plus :</strong></p><p>La documentation officielle : http://ggplot2.tidyverse.org/reference/ <br />Le site officiel : http://ggplot2.org/ <br />L’ouvrage de Hadley Wickham : https://www.amazon.com/dp/0387981403/ref=cm_sw_su_dp <br />Le R Graphic Cookbook : https://www.amazon.com/dp/1449316956/ref=cm_sw_su_dp?tag=ggplot2-20 <br />La cheatsheet traduite en français : http://www.thinkr.fr/aide-memoire-ggplot2/</p>