---
ID: 2994
post_title: >
  Sélectionner des sous-ensembles de jeux
  de données avec la fonction subset
author: Stan
post_excerpt: ""
layout: post
permalink: >
  https://abcdr.guyader.pro/selectionner-des-sous-ensembles-de-jeux-de-donnees-avec-la-fonction-subset/
published: true
post_date: 2015-04-04 10:02:00
---
Si l’on veut sélectionner un sous-ensemble d’un jeu de données à partir d’une condition simple étendue, d’une condition multiple exclusive, d’une condition multiple inclusive, d’une condition multiple exclusive étendue, ou d’une condition multiple inclusive étendue, il faut utiliser les opérateurs logiques OU et/ou ET.<br />Dans R, le ET s’écrit « &amp; », et le OU s’écrit « | ».<br /><br />Une condition simple porte sur une seule colonne.<br />Une condition multiple porte sur plusieurs colonnes à la fois (comme pour les régressions).<br />Une condition étendue porte sur l’union de plusieurs modalités/critères au sein d’une même colonne : elle utilise l’opérateur logique OU.<br />Une condition exclusive est une condition multiple qui porte sur l’intersection de sous-ensembles : elle utiilise l’opérateur logique ET.<br />Une condition inclusive est une condition multiple qui porte sur l’union de sous-ensembles : elle utilise l’opérateur logique OU.<br />Une condition simple ne peut, par nature, ni être exclusive, ni être inclusive.<br /><br />Pour une sélection simple étendue, on utilisera l’opérateur logique OU.<br />Pour une sélection multiple exclusive, on utilisera l’opérateur logique ET.<br />Pour une sélection multiple inclusive, on utilisera l’opérateur logique OU.<br />Pour une sélection multiple exclusive étendue, on utilisera les opérateurs logiques OU et ET.<br />Pour une sélection multiple inclusive étendue, on utilisera l’opérateur logique OU.<br /><br /><br /> <pre lang='rsplus'><br /><br />data(iris)<br />head(Iris)<br />summary(iris)<br /><br />### Exemple de sélection simple étendue sur une variable qualitative ###<br /># Il existe dans ce jeu de données 3 espèces : setosa, versicolor et virginica.<br /># On veut sélectionner le sous-ensemble concernant les espèces setosa OU versicolor.<br />iris2 = subset(iris, Species == "setosa" | Species == "versicolor") # on peut soit passer par la fonction 'subset'<br />iris2 = iris[iris$Species == "setosa" | iris$Species == "versicolor",] # ou soit passer par les conditions entre crochets<br />iris2<br /><br /># En revanche, on ne peut pas utiliser cette syntaxe :<br />iris2 = subset(iris, Species == c("setosa","versicolor"))<br /># Ni celle-ci :<br />iris2 = iris[iris$Species == c("setosa","versicolor")]<br /># Car je ne sais pas pourquoi, mais ces syntaxes ne sélectionnent qu'une partie du sous-ensemble désiré. Cette partie a un nombre de lignes égal au nombre de lignes qui auraient été sélectionnées par une condition portant sur une seule modalité.<br />dim(iris2) # On a 50 lignes, alors qu'on devrait en avoir 100 !<br /><br /><br />### Exemple de sélection simple étendue sur une variable quantitative ###<br /># On veut sélectionner les fleurs dont la longueur du pétale est inférieure à 1,5 cm OU supérieure à 5 cm.<br />iris3 = subset(iris, Petal.Length &lt;= 1.5 | Petal.Length >= 5)<br />iris3 = iris[iris$Petal.Length &lt;= 1.5 | iris$Petal.Length >= 5,]<br />iris3<br /><br /><br />### Exemple de sélection multiple exclusive ###<br /># On veut sélectionner les fleurs de l'espèce setosa ET dont la longueur du pétale est inférieure à 1,5 cm.<br />iris4 = subset(iris, Species == "setosa" &amp; Petal.Length &lt;= 1.5)<br />iris4 = iris[iris$Species == "setosa" &amp; iris$Petal.Length &lt;= 1.5,]<br />iris4<br /><br /><br />### Exemple de sélection multiple inclusive ###<br /># On veut sélectionner les fleurs de l'espèce setosa OU celles dont la longueur du pétale est supérieure à 5 cm.<br />iris5 = subset(iris, Species == "setosa" | Petal.Length >= 5)<br />iris5 = iris[iris$Species == "setosa" | iris$Petal.Length >= 5,]<br />iris5<br /><br /><br />### Exemple de sélection multiple exclusive étendue ###<br /># On veut sélectionner les fleurs de l'espèce versicolor OU virginica ET dont la longueur du pétale est supérieure à 5 cm.<br /># Attentions, il faut alors utiliser des parenthèses !<br />iris6 = subset(iris, (Species == "versicolor" | Species == "virginica") &amp; Petal.Length >= 5)<br />iris6 = iris[(iris$Species == "versicolor" | iris$Species == "virginica") &amp; iris$Petal.Length >= 5,]<br />iris6<br /><br /><br />### Exemple de sélection multiple inclusive étendue ###<br /># On veut sélectionner les fleurs de l'espèce versicolor OU virginica OU celles dont la longueur du pétale est inférieure à 1,5 cm.<br /># Pas forcément besoin de parenthèses ici.<br />iris7 = subset(iris, Species == "versicolor" | Species == "virginica" | Petal.Length &lt;= 1.5)<br />iris7 = iris[iris$Species == "versicolor" | iris$Species == "virginica" | iris$Petal.Length &lt;= 1.5,]<br />iris7<br /> </pre> <br /><br />